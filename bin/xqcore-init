#!/usr/bin/env node
'use strict';

var program = require('commander'),
	promptly = require('promptly'),
	version = require('../package.json').version;

var projectBuilder = require('./projectBuilder');



var directories = ['presenter', 'models', 'views', 'templates', 'img', 'locales'];
var files = {
	'coffeebreak.json': 'coffeebreak.json'
};

var defaultName = 'main';

program
	.version(version)
	.option('-d ', 'Enable debug mode')
	.parse(process.argv);

console.log('Create new XQCore project in %s', process.cwd());

var options = {
	default: defaultName,
	trim: true
};

var tempalteData = {};

promptly.prompt('Presenter name [main]: ', options, function (err, value) {
    tempalteData.presenter = value;
    files['presenter/' + value + '.presenter.js'] = 'presenter.js';

    promptly.prompt('Model name [main]: ', options, function (err, value) {
		tempalteData.model = value;
		files['models/' + value + '.model.js'] = 'model.js';

		promptly.prompt('View name [main]: ', options, function (err, value) {
			tempalteData.view = value;
			files['views/' + value + '.view.js'] = 'view.js';

			promptly.confirm('Create project now? [y]es or [n]o ', function(err, ok) {
				if (ok) {
					projectBuilder.createDirs(directories);
					projectBuilder.createFiles(files);
				}

				process.stdin.destroy();
			});
		});

	});


});

