<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>webdocs&#x2F;js&#x2F;xqcore-router.js - xqcore</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.8.0&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.8.0&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..&#x2F;assets/css/logo.png" title="xqcore"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.3.24</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/GetSet.html">GetSet</a></li>
            
                <li><a href="..&#x2F;classes/Manages event registering and emitting..html">Manages event registering and emitting.</a></li>
            
                <li><a href="..&#x2F;classes/XQCore.Logger.html">XQCore.Logger</a></li>
            
                <li><a href="..&#x2F;classes/XQCore.Presenter.html">XQCore.Presenter</a></li>
            
                <li><a href="..&#x2F;classes/XQCore.View.html">XQCore.View</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="..&#x2F;modules/XQCore Presenter.html">XQCore Presenter</a></li>
            
                <li><a href="..&#x2F;modules/XQCore.GetSet.html">XQCore.GetSet</a></li>
            
                <li><a href="..&#x2F;modules/XQCore.Logger.html">XQCore.Logger</a></li>
            
                <li><a href="..&#x2F;modules/XQCore.View.html">XQCore.View</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: webdocs&#x2F;js&#x2F;xqcore-router.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
&#x2F;**
 * XQCore Router API
 *
 * @author Andi Heinkelein - noname-media.com
 * @copyright Andi Heinkelein - noname-media.com
 * @package XQCore
 *
 * Based on router.js
 * Copyright Aaron Blohowiak and TJ Holowaychuk 2011.
 * https:&#x2F;&#x2F;github.com&#x2F;aaronblohowiak&#x2F;routes.js
 *&#x2F;
 XQCore.Router = (function(undefined) {

	&#x2F;**
	 * Convert path to route object
	 *
	 * A string or RegExp should be passed,
	 * will return { re, src, keys} obj
	 *
	 * @param  {String &#x2F; RegExp} path
	 * @return {Object}
	 *&#x2F;
	var Route = function(path){
		&#x2F;&#x2F;using &#x27;new&#x27; is optional
		
		var src, re, keys = [];
		
		if(path instanceof RegExp){
			re = path;
			src = path.toString();
		}else{
			re = pathToRegExp(path, keys);
			src = path;
		}

		return {
			re: re,
			src: path.toString(),
			keys: keys
		};
	};

	&#x2F;**
	 * Normalize the given path string,
	 * returning a regular expression.
	 *
	 * An empty array should be passed,
	 * which will contain the placeholder
	 * key names. For example &quot;&#x2F;user&#x2F;:id&quot; will
	 * then contain [&quot;id&quot;].
	 *
	 * @param  {String} path
	 * @param  {Array} keys
	 * @return {RegExp}
	 *&#x2F;
	var pathToRegExp = function (path, keys) {
		path = path
			.concat(&#x27;&#x2F;?&#x27;)
			.replace(&#x2F;\&#x2F;\(&#x2F;g, &#x27;(?:&#x2F;&#x27;)
			.replace(&#x2F;(\&#x2F;)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?&#x2F;g, function(_, slash, format, key, capture, optional){
				keys.push(key);
				slash = slash || &#x27;&#x27;;
				return &#x27;&#x27;
					+ (optional ? &#x27;&#x27; : slash)
					+ &#x27;(?:&#x27;
					+ (optional ? slash : &#x27;&#x27;)
					+ (format || &#x27;&#x27;) + (capture || &#x27;([^&#x2F;]+?)&#x27;) + &#x27;)&#x27;
					+ (optional || &#x27;&#x27;);
			})
			.replace(&#x2F;([\&#x2F;.])&#x2F;g, &#x27;\\$1&#x27;)
			.replace(&#x2F;\*&#x2F;g, &#x27;(.+)&#x27;);
		return new RegExp(&#x27;^&#x27; + path + &#x27;$&#x27;, &#x27;i&#x27;);
	};

	&#x2F;**
	 * Attempt to match the given request to
	 * one of the routes. When successful
	 * a  {fn, params, splats} obj is returned
	 *
	 * @param  {Array} routes
	 * @param  {String} uri
	 * @return {Object}
	 *&#x2F;
	var match = function (routes, uri) {
		var captures, i = 0;

		for (var len = routes.length; i &lt; len; ++i) {
			var route = routes[i],
			    re = route.re,
			    keys = route.keys,
			    splats = [],
			    params = {},
			    j;

			captures = re.exec(uri);
			if (captures) {
				for (j = 1, len = captures.length; j &lt; len; ++j) {
					var key = keys[j-1],
						val = typeof captures[j] === &#x27;string&#x27;
							? decodeURIComponent(captures[j])
							: captures[j];
					if (key) {
						params[key] = val;
					} else {
						splats.push(val);
					}
				}

				return {
					params: params,
					splats: splats,
					route: route.src
				};
			}
		}
	};

	&#x2F;**
	 * Default &quot;normal&quot; router constructor.
	 * accepts path, fn tuples via addRoute
	 * returns {fn, params, splats, route}
	 *  via match
	 *
	 * @return {Object}
	 *&#x2F;
	&#x2F;&#x2F; var getRouter = function() {
	&#x2F;&#x2F;   &#x2F;&#x2F;using &#x27;new&#x27; is optional
	&#x2F;&#x2F;   return {
	&#x2F;&#x2F;     routes: [],
	&#x2F;&#x2F;     routeMap : {},
	&#x2F;&#x2F;     addRoute: function(path, fn) {
	&#x2F;&#x2F;       if (!path) {
	&#x2F;&#x2F;         throw new Error(&#x27; route requires a path&#x27;);
	&#x2F;&#x2F;       }

	&#x2F;&#x2F;       if (!fn) {
	&#x2F;&#x2F;        throw new Error(&#x27; route &#x27; + path.toString() + &#x27; requires a callback&#x27;);
	&#x2F;&#x2F;       }

	&#x2F;&#x2F;       var route = new Route(path);
	&#x2F;&#x2F;       route.fn = fn;

	&#x2F;&#x2F;       this.routes.push(route);
	&#x2F;&#x2F;       this.routeMap[path] = fn;
	&#x2F;&#x2F;     },

	&#x2F;&#x2F;     match: function(pathname) {
	&#x2F;&#x2F;       var route = match(this.routes, pathname);
	&#x2F;&#x2F;       if(route){
	&#x2F;&#x2F;         route.fn = this.routeMap[route.route];
	&#x2F;&#x2F;       }
	&#x2F;&#x2F;       return route;
	&#x2F;&#x2F;     }
	&#x2F;&#x2F;   };
	&#x2F;&#x2F; };

	var router = function(conf) {
		conf = $.extend({
			debug: false
		}, conf);

		this.debug = Boolean(conf.debug);

		this.routes = [];
	    this.routeMap = {};
	};

	router.prototype.addRoute = function(path, fn) {
		if (!path) {
			throw new Error(&#x27; route requires a path&#x27;);
		}

		if (!fn) {
			throw new Error(&#x27; route &#x27; + path.toString() + &#x27; requires a callback&#x27;);
		}

		var route = new Route(path);
		route.fn = fn;

		this.routes.push(route);
		this.routeMap[path] = fn;
	};

	router.prototype.match = function(pathname) {
		var route = match(this.routes, pathname);
		if(route){
			route.fn = this.routeMap[route.route];
		}
		return route;
	};

	&#x2F;**
	 * Fires a give route
	 *
	 * @param  {String} route	The route to fire
	 * @param  {Object}	data	Callback data
	 *
	 * @return {Boolean}       Returns the matched route
	 *&#x2F;
	router.prototype.fire = function(route, data) {
		route = this.match(route);
		if (route) {
			route.fn(data);
		}
	};

	return router;

})();
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
