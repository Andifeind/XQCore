/*!
 * XQCore - +0.11.1-39
 * 
 * Model View Presenter Javascript Framework
 *
 * XQCore is licenced under MIT Licence
 * http://opensource.org/licenses/MIT
 *
 * Copyright (c) 2012 - 2015 Noname Media, http://noname-media.com
 * Author Andi Heinkelein
 *
 * Creation Date: 2015-05-31
 */
var XQCore;(function(e,t){"use strict";"function"==typeof define&&define.amd?define("xqcore",["jquery"],t):"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery")):e.XQCore=t(e.jQuery)})(this,function(e){"use strict";return XQCore={version:"0.11.1-39",defaultRoute:"index",html5Routes:!1,hashBang:"#!",callerEvent:"callerEvent",objectIdPattern:/^[a-zA-Z0-9]{24}$/,templateEngine:"firetpl",viewsDir:"./views/",viewExt:".fire",socketPort:9889},XQCore.extend=e.extend,XQCore.isEmptyObject=e.isEmptyObject,XQCore.isPlainObject=e.isPlainObject,XQCore.isFunction=e.isFunction,XQCore.__moduleCache={},XQCore.isObjectId=function(e){return this.objectIdPattern.test(e)},XQCore.modules={jquery:{cjs:"jquery",amd:"jquery",win:"jQuery"},firetpl:{cjs:"firetpl",amd:"firetpl",win:"fireTpl"},sockjs:{cjs:"xqcore/lib/sockjs.js",amd:"xqcore/lib/sockjs.js",win:"SockJS"}},XQCore.require=function(e){if(XQCore.__moduleCache[e])return XQCore.__moduleCache[e];var t="win";"undefined"!=typeof module&&module.exports&&"function"==typeof require?t="cjs":"function"==typeof define&&define.amd&&(t="amd"),XQCore.modules[e][t]&&(e=XQCore.modules[e][t]);try{if("cjs"===t||"amd"===t)try{return require(e)}catch(i){console.warn("Module not registered as a "+("cjs"===t?"CommonJS":"AMD")+" module! Try to load from window object",e)}return window[e]}catch(i){console.error("Could not load module!",e,i)}},XQCore.setLocale=function(e){localStorage.setItem("xqcore.locale",e)},XQCore.getLocale=function(){var e=localStorage.getItem("xqcore.locale");return e?e:navigator.language},XQCore.logLevel=1,XQCore}),function(e){"use strict";var t=function(t){this.loggerName=t,this.logLevel=e.logLevel};t.prototype.log=function(){var e;this.logLevel>=3&&(e=Array.prototype.slice.call(arguments),3===this.logLevel&&(e=[e[0]]),this.loggerName&&e.unshift("["+this.loggerName+"]"),console.log.apply(console,e))},t.prototype.warn=function(){var e;this.logLevel>=2&&(e=Array.prototype.slice.call(arguments),this.loggerName&&e.unshift("["+this.loggerName+"]"),console.warn.apply(console,e))},t.prototype.error=function(){var e;this.logLevel>=1&&(e=Array.prototype.slice.call(arguments),this.loggerName&&e.unshift("["+this.loggerName+"]"),console.error.apply(console,e))},t.prototype.debug=function(){var e;this.logLevel>=4&&(e=Array.prototype.slice.call(arguments),4===this.logLevel&&(e=[e[0]]),this.loggerName&&e.unshift("["+this.loggerName+"]"),console.debug.apply(console,e))},t.prototype.info=t.prototype.log,t.prototype.timer=function(e){var t=this,i={start:null,stop:null,name:e,logger:this,end:function(){this.stop=Date.now(),this.logger.log("Timer "+e+" finished after "+t.getHumanTime(this.stop-this.start))}};return this.log("Start Timer "+e),i.start=Date.now(),i},t.prototype.dev=function(){var e;this.debug&&(e=Array.prototype.slice.call(arguments),this.loggerName&&e.unshift("["+this.loggerName+"]"),console.debug.apply(console,e))},t.prototype.req=t.prototype.log,t.prototype.res=t.prototype.log,t.prototype.getHumanTime=function(e){return 1e3>e?e+"ms":6e4>e?Math.round(e/100)/10+"sec":Math.round(e/6e4)+"min "+Math.round(e%6e4/1e3)+"sec"},e.Logger=t}(XQCore),function(e){"use strict";function t(){}function i(e,t){for(var i=e.length;i--;)if(e[i].listener===t)return i;return-1}var n=new e.Logger("Event"),r=t.prototype;r.getListeners=function(e){var t,i,n=this._getEvents();if(e instanceof RegExp){t={};for(i in n)n.hasOwnProperty(i)&&e.test(i)&&(t[i]=n[i])}else t=n[e]||(n[e]=[]);return t},r.flattenListeners=function(e){var t,i=[];for(t=0;e.length>t;t+=1)i.push(e[t].listener);return i},r.getListenersAsObject=function(e){var t,i=this.getListeners(e);return i instanceof Array&&(t={},t[e]=i),t||i},r.on=function(e,t){var r,o=this.getListenersAsObject(e),s="object"==typeof t;for(r in o)o.hasOwnProperty(r)&&-1===i(o[r],t)&&o[r].push(s?t:{listener:t,once:!1});return n.debug('Register "'+e+'" as an event listener. Total listener length of this type is: '+o[r].length),this},r.once=function(e,t){return this.on(e,{listener:t,once:!0})},r.defineEvent=function(e){return this.getListeners(e),this},r.defineEvents=function(e){for(var t=0;e.length>t;t+=1)this.defineEvent(e[t]);return this},r.off=function(e,t){var r,o,s=this.getListenersAsObject(e),a=0;if(1===arguments.length)return this.removeEvent(e),this;for(o in s)if(s.hasOwnProperty(o)&&(r=i(s[o],t),-1!==r)){var c=s[o].splice(r,1);a=c.length}return n.debug('Remove an event listener of type "'+e+'". Length of removed listeners is: '+a),this},r.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},r.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},r.manipulateListeners=function(e,t,i){var n,r,o=e?this.removeListener:this.addListener,s=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(n=i.length;n--;)o.call(this,t,i[n]);else for(n in t)t.hasOwnProperty(n)&&(r=t[n])&&("function"==typeof r?o.call(this,n,r):s.call(this,n,r));return this},r.removeEvent=function(e){var t,i,r=typeof e,o=this._getEvents();if("string"===r)delete o[e];else if(e instanceof RegExp)for(t in o)o.hasOwnProperty(t)&&e.test(t)&&(i=o[t].length,delete o[t]);else delete this._events;return n.debug('Remove an event listener of type "'+e+'". Length of removed listeners is: '+i),this},r.emitEvent=function(e,t){var i,r,o,s,a=this.getListenersAsObject(e);for(o in a)if(a.hasOwnProperty(o))for(r=a[o].length;r--;)i=a[o][r],i.once===!0&&this.off(e,i.listener),s=i.listener.apply(this,t||[]),s===this._getOnceReturnValue()&&this.off(e,i.listener);return n.debug('Emit an event of type "'+e+'"',"Args array:",t),this},r.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},r.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},r._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},r._getEvents=function(){return this._events||(this._events={})},e.Event=t}(XQCore),function(e){"use strict";var t,i=e.require("jquery"),n=function(n,r){var o=this;"function"==typeof arguments[0]&&(r=n,n=null),this.name=n||"Nameless",this.__Router=new e.Router,t=new e.Logger(this.name+"Presenter"),this.__views={},"function"==typeof r&&r.call(this,o,t),e.html5Routes?window.addEventListener("popstate",function(e){o.__onPopstate(e.state)},!1):window.addEventListener("hashchange",function(e){o.__onPopstate(e.state)},!1);var s=e.defaultRoute;if(/^#![a-zA-Z0-9]+/.test(o.getHash())&&(s=o.getHash().substr(2)),s=o.__Router.match(s)){var a=s.params;e.callerEvent&&(a[e.callerEvent]="pageload"),i(function(){t.info("Trigger route",s,a),s.fn.call(o,s.params)})}};e.extend(n.prototype,new e.Event),n.prototype.init=function(){},n.prototype.pushState=function(t,i){var n=e.html5Routes||"/"===i.charAt(0)?"":e.hashBang;i=n+i,history.pushState(t,"",i||null),this.log("Update history with pushState",t,i)},n.prototype.replaceState=function(t,i){var n=e.html5Routes||"/"===i.charAt(0)?"":e.hashBang;i=n+i,history.replaceState(t,"",i||null),this.log("Update history with replaceState",t,i)},n.prototype.navigateTo=function(t,i,n){if(this.log("Navigate to route: ",t,i,n),n=n||{},e.html5Routes){n.replace?this.replaceState(i,t):this.pushState(i,t);var r=new PopStateEvent("popstate",{bubbles:!1,cancelable:!1,state:null});window.dispatchEvent(r)}else{var o=e.hashBang+t;if(n.trigger!==!1&&location.hash===o)return this.__onPopstate(),undefined;location.hash=o}},n.prototype.navigateBack=function(){history.back()},n.prototype.getView=function(e){return this.__views[e]||null},n.prototype.getHash=function(){return location.hash},n.prototype.getPathname=function(){return location.pathname},n.prototype.couple=function(i,n,r){var o,s=null;r=r||{},!i instanceof e.View&&t.error("First arg is not a valid view in "+this.name+" presenter.couple()!"),(!n instanceof e.Model||!n instanceof e.List)&&t.error("Second arg is not a valid model or list in "+this.name+" presenter.couple()!"),n instanceof e.List&&(s=n,n=null);var a=e.extend({"data.replace":"render","data.item":"xrender","data.append":"xrender","data.prepend":"xrender","data.insert":"insert","data.remove":"remove","validation.error":"validationFailed","state.change":"onStateChange"},r.modelEvents),c=e.extend({"item.push":"xrender","item.unshift":"xrender","item.pop":"xrender","item.shift":"xrender","state.change":"onStateChange"},r.listEvents),l=e.extend({"form.submit":"submit"},r.viewEvents);if(!i instanceof e.View)return t.error("Can't couple view with model! View isn't a XQCore.View"),undefined;if(n&&!n instanceof e.Model)return t.error("Can't couple model with model! Model isn't a XQCore.Model"),undefined;if(s&&!s instanceof e.List)return t.error("Can't couple list with list! List isn't a XQCore.List"),undefined;n&&t.info("Couple view ",i.name,"with model",n.name),s&&t.info("Couple view ",i.name,"with list",s.name),i.__coupledWith||(i.__coupledWith=[]),n&&!n.__coupledWith&&(n.__coupledWith=[]),s&&!s.__coupledWith&&(s.__coupledWith=[]),n&&(i.__coupledWith.some(function(e){return e===n})||i.__coupledWith.push(n),n.__coupledWith.some(function(e){return e===i})||n.__coupledWith.push(i)),s&&(i.__coupledWith.some(function(e){return e===s})||i.__coupledWith.push(s),s.__coupledWith.some(function(e){return e===i})||s.__coupledWith.push(i));var p,u=function(e,t){var r=function(){if("xrender"===t)i.render(n.get());else{var r=Array.prototype.slice.call(arguments);r.push(n.name,e),i[t].apply(i,r)}};r.fnType="coupled-model-listener",r.fnParent=i,n.on(e,r)},h=function(e,t){var n=function(){if("xrender"===t)i.render(s.toArray());else{var n=Array.prototype.slice.call(arguments);n.push(s.name,e),i[t].apply(i,n)}};n.fnType="coupled-list-listener",n.fnParent=i,s.on(e,n)};if(n){p=function(e,t){var r=function(e,r){n[t](e,r,i.name)};r.fnType="coupled-view-listener",r.fnParent=n,i.on(e,r)};for(o in a)a.hasOwnProperty(o)&&u(o,a[o])}if(s){p=function(e,t){var n=function(e,n){s[t](e,n,i.name)};n.fnType="coupled-view-listener",n.fnParent=s,i.on(e,n)};for(o in c)c.hasOwnProperty(o)&&h(o,c[o])}for(o in l)l.hasOwnProperty(o)&&p(o,l[o]);return n&&i.render(n.properties),s&&i.render(s.toArray()),r.forms&&i.formSetup(n),this},n.prototype.__onPopstate=function(i){var n=this;t.info("popstate event recived",i,n);var r=e.defaultRoute;if(e.html5Routes){var o=RegExp("^"+n.root);r=n.getPathname().replace(o,"")}else/^#!\S+/.test(this.getHash())&&(r=n.getHash().substr(2));r=n.__Router.match(r),r&&(i=i||r.params,e.callerEvent&&(i[e.callerEvent]="popstate"),t.info("Trigger route",r,i),r.fn.call(n,i))},n.prototype.initView=function(t,i,n){n=n||{};var r=new e.View(t,function(r){r.template=e.Tmpl.getTemplate(t),r.mode=n.mode||"replace",r.container=i||"body",r.hidden=!!n.hidden,n.inject===!1&&(r.autoInject=!1)});return this.__views[t]=r,r},n.prototype.route=function(e,i){var n=this;"string"==typeof i&&(i=this[i]),"function"==typeof i?"string"==typeof e?(t.info("Register route",e,"with callback",i),this.__Router.addRoute(e,i)):Array.isArray(e)&&e.forEach(function(e){t.info("Register route",e,"with callback",i),n.__Router.addRoute(e,i)}):t.warn("Router callback isn't a function",i,"of route",e)},e.Presenter=n}(XQCore),function(e,t){"use strict";var i=e.require("jquery"),n=function(){};n.prototype.onSend=function(e){return e},n.prototype.send=function(e,n,r,o){var s=this;"object"==typeof n?(o=r,r=n,n=this.server,e=e):"function"==typeof r?(o=r,r=this.get()):r===t&&(r=this.get()),e===t&&(e="POST"),n||(n=this.server),"GET"===e&&Array.isArray(r)&&(n=n.replace(/\/$/,"")+"/"+r.join("/"),r=null),"function"==typeof this.onSend&&(r=this.onSend.call(this,r)),this.log("Send an ajax call to ",n,"with data: ",r),this.state("syncing"),i.ajax({url:n,type:e,data:r,dataType:"json",success:function(e,t,i){"function"==typeof o&&o.call(s,null,e,t,i),s.state("success")},error:function(e,t,i){"function"==typeof o&&o.call(s,{type:t,http:i},null,t,e),s.state("failed")}})},n.prototype.sendPOST=function(e,t,i){this.send("POST",e,t,i)},n.prototype.sendGET=function(e,t,i){this.send("GET",e,t,i)},n.prototype.sendPUT=function(e,t,i){this.send("PUT",e,t,i)},n.prototype.sendDELETE=function(e,t,i){this.send("DELETE",e,t,i)},n.prototype.ready=function(e){var t=this;e===!0?(Array.isArray(this.__callbacksOnReady)&&(this.log("Trigger ready state"),this.__callbacksOnReady.forEach(function(e){e.call(t)})),this.__isReady=!0,delete this.__callbacksOnReady):"function"==typeof e?this.__isReady===!0?e():(this.__callbacksOnReady||(this.__callbacksOnReady=[]),this.__callbacksOnReady.push(e)):this.warn("arg0 isn't a callback in model.ready()!")},n.prototype.fetch=function(e,t){this.sendGET(e,t)},n.prototype.save=function(e,t){"function"==typeof e&&(t=e,e=this.schema?this.getByKeys(Object.keys(this.schema)):this.get()),this.isValid()?this.sendPOST(e,t):"function"==typeof t&&t({msg:"Model isn't valid. Cancle save"})},n.prototype.update=function(e,t){"function"==typeof e&&(t=e,e=this.schema?this.getByKeys(Object.keys(this.schema)):this.get()),this.isValid()?this.sendPUT(e,t):"function"==typeof t&&t({msg:"Model isn't valid. Cancel update"})},n.prototype.submit=function(e){if(this.set(e,{extend:!0})){if(e.id===t||null===e.id)return this.save(e),t;this.update(e)}},e.Sync=n}(XQCore),function(XQCore,undefined){"use strict";var Model;Model=function(e,t){"object"==typeof arguments[0]&&(t=e,e=t.name),this.debug=XQCore.debug,this.properties={},t===undefined&&(t={}),"function"==typeof t?t.call(this,this):XQCore.extend(this,t),this.__state="starting",this.__unfiltered={},this.customValidate=t.validate,delete t.validate,this.conf=t,this.name=(e?e.replace(/Model$/,""):"Nameless")+"Model",this._isValid=!1,this.defaults&&!XQCore.isEmptyObject(this.defaults)&&this.set(this.defaults,{silent:!0,noValidation:!0,extend:!0}),this._isValid=!this.schema,this.state("ready")},XQCore.extend(Model.prototype,new XQCore.Event,new XQCore.Logger),XQCore.Sync&&XQCore.extend(Model.prototype,XQCore.Sync.prototype),Model.inherit=function(e,t){"object"==typeof e&&(t=e,e=undefined);var i=function(){XQCore.Model.call(this,e,t)};return i.prototype=Object.create(XQCore.Model.prototype),i.prototype.constructor=i,i},Model.prototype.init=function(){console.warn("Model.init is deprecated since v0.10.0")},Model.prototype.state=function(e){this.__state=e,this.emit("state."+e),this.emit("state.change",e)},Model.prototype.getState=function(){return this.__state},Model.prototype.set=function(e,t,i){var n,r={},o=this.get(),s=!1,a=!1;if(i=i||{},null===arguments[0])r=arguments[1],a=!0,this.log("Set data",r,o);else if("object"==typeof arguments[0])i=t||{},r=i.replace?arguments[0]:XQCore.extend(r,o,arguments[0]),a=!0,e=null,this.log("Set data",r,o);else if("string"==typeof arguments[0]){if(r=XQCore.extend({},this.get()),s=!0,XQCore.dedotify(r,e,t),this.log("Set data",r,o),i=i||{},!this.customValidate&&i.validateOne&&(i.noValidation=!0,n=this.validateOne(this.schema[e],t),n.isValid===!1))return n.error=n.error||{},n.error.property=e,this.warn("Validation error in model.set of property",e,n),i.silent!==!0&&this.emit("validation.error",n,r),!1}else this.warn("Data are incorrect in model.set()",arguments);return i=i||{},!this.customValidate&&this.schema&&i.noValidation!==!0&&(n=this.validate(r),null!==n)?(this.warn("Validate error in model.set",n),i.silent!==!0&&this.emit("validation.error",n,r),!1):this.customValidate&&i.noValidation!==!0&&(n=this.customValidate(r),this.log("Using a custom validation which returns:",n),null!==n)?(this.warn("Validate error in model.set",n),this.emit("validation.error",n,r),!1):(this.properties=r,i.silent!==!0&&(a?"function"==typeof this.sync&&i.sync===!0?this.sync("set",r):this.emit("data.replace",r,o):s&&("function"==typeof this.sync&&i.sync===!0&&this.sync("item",e,t),this.emit("data.item",e,t)),this.emit("data.change",r,o)),!0)},Model.prototype.get=function(key,options){options=options||{};var data;if(typeof key===options&&null!==key&&(options=key,key=null),key===undefined||null===key){if(options.copy===!0)switch(data=this.properties,typeof data){case"object":return Array.isArray(data)?data.slice():XQCore.extend(!0,{},data);case"function":return eval("("+(""+data)+")");default:return data}return this.properties}if(options.copy===!0)switch(data=XQCore.undotify(key,this.properties),typeof data){case"object":return Array.isArray(data)?data.slice():XQCore.extend(!0,{},data);case"function":return eval("("+(""+data)+")");default:return data}return XQCore.undotify(key,this.properties)},Model.prototype.getByKeys=function(e,t){if("object"!=typeof e)throw Error("First param must be an object or array in Model.getByKeys()!");var i={};if(t=t||this.get(),Array.isArray(e))e.forEach(function(e){-1===e.indexOf(".")?i[e]=t[e]:i=XQCore.dedotify(i,e,XQCore.undotify(e,t))});else for(var n in e)if(e.hasOwnProperty(n)){var r=t[n];i[n]="object"==typeof r?this.getByKeys(e[n],t[n]):t[n]}return i},Model.prototype.has=function(e){var t=!0,i=this.properties;e=e.split(".");for(var n=0,r=e.length;r>n;n++){if("object"!=typeof i||!i.hasOwnProperty(e[n])){t=!1;break}i=i[e[n]]}return t},Model.prototype.reset=function(e){this.log("Reset model");var t=this.get();return this.properties=XQCore.extend({},this.defaults),this.state("starting"),e?this.removeEvent():this.emit("data.reset",t),this},Model.prototype.append=function(e,t,i){var n=XQCore.undotify(e,this.properties);if(i=i||{},n instanceof Array)n.push(t);else if(n===undefined)XQCore.dedotify(this.properties,e,[t]);else{if("object"!=typeof n||e||!XQCore.isEmptyObject(this.properties))return this.error("Model.append requires an array. Dataset isn't an array. Path: ",e),undefined;this.properties=[t]}i.silent!==!0&&("function"==typeof this.sync&&i.sync===!0&&this.sync("append",e,t),this.emit("data.append",e,t),this.emit("data.change",this.properties))},Model.prototype.prepend=function(e,t,i){var n=XQCore.undotify(e,this.properties);if(i=i||{},n instanceof Array)n.unshift(t);else if(n===undefined)XQCore.dedotify(this.properties,e,[t]);else{if("object"!=typeof n||e||!XQCore.isEmptyObject(this.properties))return this.error("Model.prepend requires an array. Dataset isn't an array. Path: ",e),undefined;this.properties=[t]}i.silent!==!0&&("function"==typeof this.sync&&i.sync===!0&&this.sync("prepend",e,t),this.emit("data.prepend",e,t),this.emit("data.change",this.properties))},Model.prototype.insert=function(e,t,i,n){var r=XQCore.undotify(e,this.properties);if(n=n||{},r instanceof Array)r.splice(t,0,i);else if(r===undefined)XQCore.dedotify(this.properties,e,[i]);else{if("object"!=typeof r||e||!XQCore.isEmptyObject(this.properties))return this.error("Model.insert requires an array. Dataset isn't an array. Path: ",e),undefined;this.properties=[i]}n.silent!==!0&&("function"==typeof this.sync&&n.sync===!0&&this.sync("insert",e,1,i),this.emit("data.insert",e,t,i),this.emit("data.change",this.properties))},Model.prototype.remove=function(e,t,i){var n=XQCore.undotify(e,this.properties),r=null;if(i=i||{},n instanceof Array)r=n.splice(t,1);else if("object"==typeof n)return this.error("Model.remove requires an array. Dataset isn't an array. Path: ",e),undefined;return r&&i.silent!==!0&&("function"==typeof this.sync&&i.sync===!0&&this.sync("remove",e,t),this.emit("data.remove",e,t,r[0]),this.emit("data.change",this.properties)),r},Model.prototype.repalce=function(e,t){return t=t||{},t.repalce=!0,this.set(e,t)},Model.prototype.search=function(e,t){var i;if(1===arguments.length?(t=e,e="",i=this.properties):i=e?XQCore.undotify(e,this.properties):this.properties,i)for(var n=0;i.length>n;n++){var r,o=i[n];for(var s in t)if(t.hasOwnProperty(s)){if(o[s]&&o[s]===t[s]){r=!0;break}r=!1}if(r===!0)return o}return null},Model.prototype.modify=function(e,t,i){var n=this.search(e,t);n&&(XQCore.extend(n,i),this.emit("data.modify",e,i,n),this.emit("data.change",this.properties))},Model.prototype.sortBy=function(e,t){1===arguments.length&&(t=e,e=null);var i,n=XQCore.undotify(e,this.properties);return Array.isArray(n)?(n.sort(function(e,n){i=-1;for(var r in t)if(t.hasOwnProperty(r)){if(i=(XQCore.undotify(r,e)+"").localeCompare(XQCore.undotify(r,n)+""),0===i)continue;-1===t[r]&&(i=i>0?-1:1);break}return i}),this.set(e,n),n):(this.warn("Could not sort data of type",typeof n),[])},Model.prototype.filter=function(e,t,i,n){if(1===arguments.length&&(n=e,e=null),"string"==typeof n){if(!this.__registeredFilter[n])throw Error("Filter "+n+" not registered!");n=this.__registeredFilter[n]}for(var r=XQCore.undotify(e,this.__unfiltered.data||this.properties),o=[],s=0,a=r.length;a>s;s++)n(t,i,r[s])&&o.push(r[s]);return this.__unfiltered={path:e,data:r},this.set(e,o),o},Model.prototype.filterReset=function(e){this.__unfiltered&&this.set(this.__unfiltered.path,this.__unfiltered.data,e)},Model.prototype.validate=function(e,t){var i=this,n=[];return t=t||this.schema,t&&Object.keys(t).forEach(function(r){if("object"==typeof e[r]&&t[r].type===undefined){var o=i.validate(XQCore.extend({},e[r]),XQCore.extend({},t[r]));return Array.isArray(o)&&o.length>0&&(n=n.concat(o)),undefined}var s=i.validateOne(t[r],e[r]);s.isValid===!0?e[r]=s.value:(s.error.property=r,n.push(s.error))}),0===n.length?(this._isValid=!0,this.state("valid"),null):(this._isValid=!1,this.state("invalid"),n)},Model.prototype.validateOne=function(e,t){var i,n="function"==typeof e.type?typeof e.type():e.type.toLowerCase();if(""===t&&e.noEmpty===!0&&(t=undefined),t!==undefined&&null!==t&&""!==t||!e["default"]||(t=e["default"]),t===undefined||null===t||""===t)e.required===!0&&(i={msg:"Property is undefined or null, but it's required",errCode:10});else{if(!this.__registeredValidations[n])throw Error("Undefined schema type",e);i=this.__registeredValidations[n].call(this,t,e)}return i=i===undefined?{isValid:!0,value:t,error:null}:{isValid:!1,value:t,error:i}},Model.prototype.isValid=function(){return this._isValid},Model.prototype.setData=function(e){this.warn("Model.setData has been deprecated since v0.9"),this.set(e,{extend:!0})},Model.registerFilter=function(e,t){if("function"!=typeof t)throw Error("Filter function isn't a function");var i="function"==typeof this?Model.prototype:this;i.__registeredFilter[e]=t},Model.prototype.registerFilter=Model.registerFilter,Model.prototype.__registeredFilter={quicksearch:function(e,t,i){var n=XQCore.undotify(e,i),r=RegExp(t.replace(/[a-z0-9äüöß]/g,"$&.*"),"i");return r.test(n)}},Model.registerValidation=function(e,t){var i="function"==typeof this?Model.prototype:this;i.__registeredValidations[e]=t},Model.prototype.registerValidation=Model.registerValidation,Model.prototype.__registeredValidations={string:function(e,t){return t.convert&&"number"==typeof e&&(e+=""),"string"!=typeof e?{msg:"Property type is a "+typeof e+", but a string is required",errCode:11}:t.min&&t.min>e.length?{msg:"String length is too short",errCode:12}:t.max&&t.max<e.length?{msg:"String length is too long",errCode:13}:t.match&&!t.match.test(e)?{msg:"String doesn't match regexp",errCode:14}:undefined},number:function(e,t){return t.convert&&"string"==typeof e&&(e=parseInt(e,10)),"number"!=typeof e||isNaN(e)?{msg:"Property type is not a valid number",errCode:21}:t.min&&t.min>e?{msg:"Number is too low",errCode:22}:t.max&&e>t.max?{msg:"Number is too high",errCode:23}:undefined},date:function(e){if(e){var t=Date.parse(e);if(isNaN(t))return{msg:"Property isn't a valid date",errCode:31}}},array:function(e,t){return Array.isArray(e)?t.min&&t.min>e.length?{msg:"Array length is "+e.length+" but must be greater than "+t.min,errCode:42}:t.max&&t.max<e.length?{msg:"Array length is "+e.length+" but must be lesser than "+t.max,errCode:43}:undefined:{msg:"Property type is a "+typeof e+", but an array is required",errCode:41}},object:function(e){return"object"!=typeof e?{msg:"Property isn't a valid object",errCode:51}:undefined},objectid:function(e){return/^[a-zA-Z0-9]{24}$/.test(e)?undefined:{msg:"Property isn't a valid objectId",errCode:52}},"boolean":function(e){return"boolean"!=typeof e?{msg:"Property isn't a valid boolean",errCode:61}:undefined},time:function(e){return/^\d+(:\d{2}){1,3}$/.test(e)?undefined:{msg:"Property isn't a valid time",errCode:61}}},XQCore.Model=Model}(XQCore),function(e,t){"use strict";if("function"==typeof define&&define.amd)define("xqcore",[XQCore.templateEngine],t);else if("undefined"!=typeof module&&module.exports)module.exports=t(require(XQCore.templateEngine));else{var i="firetpl"===XQCore.templateEngine?"FireTPL":"Handlebars";e.XQCore=t(e[i])}}(this,function(e){"use strict";return XQCore.Tmpl={type:XQCore.templateEngine,compile:e.compile,getTemplate:function(t){if("firetpl"===XQCore.templateEngine){var i=e;if(i.templateCache&&i.templateCache[t])return i.templateCache[t];if(i.loadFile){var n=i.readFile(XQCore.viewsDir.replace(/\/$/,"")+"/"+t+"."+XQCore.viewExt.replace(/^\./,""));return i.compile(n,{eventTags:!0})}throw Error("FireTPL runtime is being used. Please preload the "+t+"View")}}},XQCore}),function(e,t){"use strict";var i,n=e.require("jquery"),r=function(r,o){"object"==typeof arguments[0]||"function"==typeof arguments[0]?(o=r,r=null):"string"==typeof arguments[0]&&(this.name=r),i=new e.Logger(this.name+"View"),this.container="body",this.tag=t,this.className=t,this.id=t,this.mode="replace",this.autoInject=!0,this.__domReady=!1,this.__viewEvents=[];var s=this;"function"==typeof o?o.call(this,s):e.extend(this,o),this.name=(this.name?this.name.replace(/View$/,""):"Nameless")+"View",this.__createView(),n(function(){s.container.length>0?(window.addEventListener("resize",function(e){s.resize(e)},!1),i.info("Initialize view "+this.name," with conf:",o),i.info(" ... using Container:",s.container)):i.error("Can't initialize View, Container not found!",s.container)})};e.extend(r.prototype,new e.Event),r.prototype.show=function(){this.$el.show()},r.prototype.hide=function(){this.$el.hide()},r.prototype.renderHTML=function(t,n){return i.log("Render html snippet",t,"with data:",n),t="function"==typeof t?t:e.Tmpl.compile(t),t(n)},r.prototype.resize=function(){},r.prototype.getElementData=function(e){var i=n(e,this.container);if(i.length){var r,o={},s=i.get(0).attributes;for(r=0;s.length>r;r++)if(0===s[r].name.indexOf("data-")){var a=s[r].name.substr(5),c=s[r].value;if("string"==typeof c)try{c="true"===c||"TRUE"===c?!0:"false"===c||"FALSE"===c?!1:"null"===c||"NULL"===c?null:"undefined"===c?t:+c+""===c?+c:JSON.parse(c)}catch(l){}o[a]=c}return o}return null},r.prototype.validationFailed=function(e){var t=this;e.forEach(function(e){t.$el.find('[name="'+e.property+'"]').addClass("xq-invalid")})},r.prototype.onStateChange=function(e){var t=this.el.className.split(" ");t=t.filter(function(e){return!/^xq-state-/.test(e)}),t.push("xq-state-"+e),this.el.className=t.join(" ")},r.prototype.ready=function(e){this.isReady?e.call(this):(this.__readyCallbacks||(this.__readyCallbacks=[]),this.__readyCallbacks.push(e))},r.prototype.__setReadyState=function(){var e=this;this.isReady=!0,this.__readyCallbacks&&(this.__readyCallbacks.forEach(function(t){t.call(e)}),this.__readyCallbacks=[])},r.prototype.inject=function(){if(this.el.parentNode!==this.ct)if(i.info("Inject view into container",this.$ct),"replace"===this.mode)this.$ct.contents().detach(),this.$ct.append(this.$el);else if("append"===this.mode)this.$ct.append(this.$el);else{if("prepend"!==this.mode)throw Error("Unknown insert mode in view constructor");this.$ct.prepend(this.$el)}},r.prototype.parse=function(e,t,i){var r,o;e.scopeStore={},e.scopes=i||{};try{r=e(t||{},e.scopes)}catch(s){r='<p class="renderError"><b>View render error!</b><br>'+s.message+"</p>",this.error("View render error!",s)}var a=function(t,i,r){t=n.parseHTML(t);var o=n(t),s=o.find("scope"),c={};return s.each(function(){var t,o=n(this).attr("id"),s=n(this).attr("path"),l=r?r+"."+s:s,p=i;if(Array.isArray(i)&&(c[s]=c[s]||0,p=i[c[s]++]),t={},o){var u=e.scopes[o](i[s],i);t.value=u?a(u,i[s],l):document.createTextNode(""),t.id=o}else t.value=n.parseHTML(i[s]);e.scopeStore[l]=e.scopeStore[l]||[],e.scopeStore[l].push(t),n(this).replaceWith(n(t.value))}),o};return r&&(o=a(r,t)),o},r.prototype.render=function(n){if(this.__domReady===!1)return this.__initialData=n||{},t;this.autoInject&&this.inject();var r;i.info("Render view template of view "+this.name,"with data:",n);var o="function"==typeof this.template?this.template:e.Tmpl.compile(this.template);this.scopes={};try{r=o(n||{},this.scopes)}catch(s){r='<p class="renderError"><b>View render error!</b><br>'+s.message+"</p>",this.error("View render error!",s)}this.el.innerHTML=r,this.emit("content.change",n)},r.prototype.registerListener=function(e){var t=this;e.find("[on]").addBack("[on]").each(function(){var e,i=n(this),r=n(this).attr("on"),o=n(this).data();i.removeAttr("on"),r=r.split(";"),r.forEach(function(n){n=n.split(":"),e="submit"===n[0]?function(e){e.preventDefault(),o=t.serializeForm(e.target),o=t.onSubmit(o,e.target),t.emit(n[1],o,e)}:function(e){var i;e.originalEvent instanceof KeyboardEvent?i={key:e.key,code:e.keyCode,alt:e.altKey,ctrl:e.ctrlKey,meta:e.metaKey,shift:e.shiftKey}:(e.preventDefault(),i=e.currentTarget.value||""),t.emit(n[1],i,o,e)},i.bind(n[0],e)})}),this.__viewEvents.forEach(function(e){t.$el.delegate(e.selector,e.events,e.callback)})},r.prototype.serializeForm=function(t){var r={},o=n(t);return"INPUT"!==o.get(0).tagName&&(o=o.find(":input")),o.serializeArray().forEach(function(t){e.dedotify(r,t.name,t.value)}),i.info("Serialize form of view "+this.name,"form selector:",o,"form data:",r),r},r.prototype.insert=function(e,t,i){var r=this,o=this.$el.find('[fire-path="'+e+'"]');o.length&&o.each(function(){var e=n(this).attr("fire-scope"),o=r.scopes[e]([i]),s=n(this).children();t>-1?(t>s.length-1&&(t=s.length-1),s.eq(t).before(o)):s.eq(t).after(o)})},r.prototype.update=function(){i.warn("XQCore doesn`t support update events yet")},r.prototype.append=function(e,t){this.insert(e,-1,t)},r.prototype.prepend=function(e,t){this.insert(e,0,t)},r.prototype.remove=function(e,t){var i=this.$el.find('[fire-path="'+e+'"]');i.children(":eq("+t+")").remove()},r.prototype.formSetup=function(e,t){var i=this;this.ready(function(){var r="xq-invalid",o="xq-disabled";t||(t=this.$el.find("form"));var s=function(){var t=n(this).closest("form"),i=n(this);i.removeClass(r);var s=i.attr("name"),a=i.val();if(s&&e.schema&&e.schema[s]){var c=e.validateOne(e.schema[s],a);c.isValid?0===t.find(':input[class~="'+r+'"]').length&&(t.removeClass(r),t.find(":submit").removeAttr("disabled").removeClass(o)):(i.addClass(r),t.addClass(r),t.find(":submit").attr("disabled","disabled").addClass(o))}},a=function(e){e.preventDefault();var t=i.serializeForm(e.target);i.emit("form.submit",t)};this.addEvent(":input","blur",s),this.addEvent("form","submit",a)})},r.prototype.onSubmit=function(e){return e},r.prototype.destroy=function(){if(this.$el.remove(),this.removeAllListeners(),this.__coupledWith)for(var e=0,t=this.__coupledWith.length;t>e;e++){var n=this.__coupledWith[e];if(n._events)for(var r in n._events)if(n._events[r])for(var o=r,s=0,a=n._events[r].length;a>s;s++)"coupled-model-listener"===n._events[r][s].listener.fnType&&n._events[r][s].listener.fnParent===this&&n.removeEvent(o,n._events[r][s].listener)}i.info("View "+this.name+" has been destroyed")},r.prototype.addEvent=function(e,t,i){this.__viewEvents.push({events:t,selector:e,callback:i}),this.$el&&this.$el.delegate(e,t,i)},r.prototype.__viewTagTypes={"*":"div",body:"section",section:"section",ul:"li",table:"tbody",tbody:"tr",tr:"td"},r.prototype.__createViewElement=function(){if(this.tag)return document.createElement(this.tag);var e=this.ct?this.ct.tagName.toLowerCase():"*",t=this.__viewTagTypes["*"];return this.__viewTagTypes[e]&&(t=this.__viewTagTypes[e]),document.createElement(t)},r.prototype.__createView=function(){var e=this,t=[];n(function(){e.$ct=e.$ct||n(e.container),e.ct=e.$ct.get(0),e.el=e.__createViewElement(),e.$el=n(e.el),t.push("xq-view xq-"+e.name.replace(/View$/,"-view").toLowerCase()),e.id&&e.el.setAttribute("id",e.id),e.className&&t.push(e.className),e.hidden===!0&&(t.push("xq-hidden"),e.$el.hide()),e.el.className=t.join(" "),e.__domReady=!0,e.__initialData&&(e.render(e.__initialData),delete e.__initialData),e.__setReadyState(),e.registerListener(e.$el)
})},e.View=r}(XQCore),function(e,t){"use strict";e.undotify=function(e,i){return e&&(e=e.split("."),e.forEach(function(e){i=i?i[e]:t})),i},e.dedotify=function(e,i,n){"string"==typeof e&&(n=i,i=e,e={});var r=e;if(i){i=i.split(".");var o=i.length;i.forEach(function(i,r){return r===o-1?/\[\]$/.test(i)?(i=i.substr(0,i.length-2),e[i]||(e[i]=[]),e[i].push(n),t):(e[i]=n,t):(e[i]||(e[i]={}),e=e[i],t)})}return e=n,r},e.uid=function(e){e=e||7;for(var t="";e>t.length;){var i=Math.random().toString(36).substr(2);t+=i}return t.substr(0,e)}}(XQCore),function(e){"use strict";var t=function(e){var t,n,r=[];return e instanceof RegExp?(n=e,t=""+e):(n=i(e,r),t=e),{re:n,src:""+e,keys:r}},i=function(e,t){return e=e.concat("/?").replace(/\/\(/g,"(?:/").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(e,i,n,r,o,s){return t.push(r),i=i||"",""+(s?"":i)+"(?:"+(s?i:"")+(n||"")+(o||"([^/]+?)")+")"+(s||"")}).replace(/([\/.])/g,"\\$1").replace(/\*/g,"(.+)"),RegExp("^"+e+"$","i")},n=function(e,t){for(var i,n=0,r=e.length;r>n;++n){var o,s=e[n],a=s.re,c=s.keys,l=[],p={};if(i=a.exec(t)){for(o=1,r=i.length;r>o;++o){var u=c[o-1],h="string"==typeof i[o]?decodeURIComponent(i[o]):i[o];u?p[u]=h:l.push(h)}return{params:p,splats:l,route:s.src}}}},r=function(t){t=e.extend({debug:!1},t),this.debug=Boolean(t.debug),this.routes=[],this.routeMap={}};r.prototype.addRoute=function(e,i){if(!e)throw Error(" route requires a path");if(!i)throw Error(" route "+(""+e)+" requires a callback");var n=new t(e);n.fn=i,this.routes.push(n),this.routeMap[e]=i},r.prototype.match=function(e){var t=n(this.routes,e);return t&&(t.fn=this.routeMap[t.route]),t},r.prototype.fire=function(e,t){e=this.match(e),e&&e.fn(t)},e.Router=r}(XQCore),function(e){"use strict";var t=new e.Logger("Socket"),i=e.require("sockjs"),n=function(){this.__isReady=!1,this.__onReadyCallbacks=[],this.__eventEmitter=new e.Event};e.extend(n.prototype),n.prototype.connect=function(e,n,r){var o=this;t.req("Connect to socket server ",e,"using options:",n),this.sockJS=new i(e,null,n),this.sockJS.onopen=function(){t.req("Connection was successful!"),"function"==typeof r&&r(),o.setReady()},this.sockJS.onmessage=function(e){var i;try{i=JSON.parse(e.data)}catch(n){console.error("Could not parse socket message!",e.data)}t.log("Got message",i.eventName,"with args:",i.args);var r=i.args||[];r.unshift(i.eventName),o.__eventEmitter.emit.apply(o.__eventEmitter,r)},this.sockJS.onclose=function(){t.log("Connection closed!")}},n.prototype.emit=function(e){var i=this,n=Array.prototype.slice.call(arguments,1);this.ready(function(){t.log("Send message ",e,n),i.sockJS.send(JSON.stringify({eventName:e,args:n}))})},n.prototype.on=function(e,t){this.__eventEmitter.on(e,t)},n.prototype.once=function(e,t){this.__eventEmitter.once(e,t)},n.prototype.off=function(e,t){this.__eventEmitter.off(e,t)},n.prototype.ready=function(e){this.__isReady?e.call(this):this.__onReadyCallbacks.push(e)},n.prototype.setReady=function(){var e=this;this.__isReady=!0,this.__onReadyCallbacks.forEach(function(t){t.call(e)}),this.__onReadyCallbacks=[]},e.Socket=n}(XQCore),function(e){"use strict";var t;t=function(t,i){e.Model.call(this,t,i),i=i||{},this.server=i.server||location.protocol+"//"+location.hostname,this.port=i.port||e.socketPort,this.path=i.path||"xqsocket/"+t,this.syncEnabled=!1},t.prototype=Object.create(e.Model.prototype),t.prototype.constructor=t,t.prototype.init=function(){e.Model.prototype.init.call(this),this.connectToSocket()},t.prototype.connectToSocket=function(){var t=this.server+":"+this.port+"/"+this.path;this.socket||(this.socket=new e.Socket,this.socket.connect(t))},t.prototype.register=function(e){var t=this,i=this.conf.syncWith||this.name.replace(/Model$/,"");this.syncEnabled=!!e,console.log("register model at server"),this.socket.emit("syncmodel.register",{name:i}),this.socket.on("syncmodel.change",function(e){var i={noSync:!0},n=e.slice(1);switch(n.push(i),e[0]){case"replace":case"item":t.set.apply(t,n);break;case"append":t.append.apply(t,n);break;case"prepend":t.prepend.apply(t,n);break;case"insert":t.insert.apply(t,n);break;case"remove":t.remove.apply(t,n);break;default:t.warn("Unknown syncmodel event",e[0])}})},t.prototype.unregister=function(){var e=this.conf.syncWith||this.name.replace(/Model$/,"");this.socket.emit("syncmodel.unregister",{name:e}),this.socket.off("syncmodel.change")},t.prototype.emitRemote=function(e,t){this.socket.emit(e,t)},t.prototype.sync=function(){if(this.syncEnabled){var e=Array.prototype.slice.call(arguments);this.emitRemote("syncmodel.change",e)}},e.SyncModel=t}(XQCore),function(e,t){"use strict";var i;i=function(i,n){var r=this;"object"==typeof arguments[0]&&(n=i,i=n.name),this.debug=e.debug,n===t&&(n={}),this.__unfiltered={},this.name=(i?i.replace(/List$/,""):"Nameless")+"List",this.items=[],this.maxLength=null,this.model||(this.model=e.Model),"function"==typeof n?n.call(this,r):e.extend(this,n),this.state("ready")},e.extend(i.prototype,new e.Event,new e.Logger),Object.defineProperty(i.prototype,"length",{get:function(){return this.items.length}}),i.prototype.state=function(e){this.__state=e,this.emit("state."+e),this.emit("state.change",e)},i.prototype.getState=function(){return this.__state},i.prototype.push=function(t,i){var n,r,o=[];i=i||{},Array.isArray(t)||(t=[t]);for(var s=0,a=t.length;a>s;s++){if(r=t[s],r instanceof e.Model?n=r:(n=new this.model("ListItem"),n.set(r)),!n.isValid())return!1;o.push(n)}var c=this.items.push.apply(this.items,o);return this.maxLength&&this.items.length>this.maxLength&&this.items.splice(0,this.items.length-this.maxLength),i.silent||this.emit("item.push",c-o.length,o.length),i.noSync||"function"==typeof this.sync&&this.sync("push",o),!0},i.prototype.unshift=function(t,i){var n,r,o=[];i=i||{},Array.isArray(t)||(t=[t]);for(var s=0,a=t.length;a>s;s++){if(r=t[s],r instanceof e.Model?n=r:(n=new this.model("ListItem"),n.set(r)),!n.isValid())return!1;o.unshift(n)}var c=this.items.unshift.apply(this.items,o);return i.silent||this.emit("item.unshift",c-o.length,o.length),i.noSync||"function"==typeof this.sync&&this.sync("unshift",o),!0},i.prototype.pop=function(e){var i;return e=e||{},i=this.items.pop()||null,i===t?null:(e.silent||this.emit("item.pop",i),e.noSync||"function"==typeof this.sync&&this.sync("pop",i),i)},i.prototype.shift=function(e){var i;return e=e||{},i=this.items.shift()||null,i===t?null:(e.silent||this.emit("item.shift",i),e.noSync||"function"==typeof this.sync&&this.sync("shift",i),i)},i.prototype.update=function(t,i,n){var r,o,s=[],a=this;n=n||{},Array.isArray(i)||(i=[i]);for(var c=0,l=i.length;l>c;c++){if(o=i[c],o instanceof e.Model?r=o:(r=new this.model("ListItem"),r.set(o)),!r.isValid())return!1;s.push(r)}var p=Object.keys(t);return console.log("KEYS",p),s.forEach(function(e){e=e.properties,console.log("NEW",e);var i={};p.forEach(function(t){i[t]=e[t]}),console.log("QUERY",i);var r=a.findOne(i);r?(r.set(e),n.silent||a.emit("item.update",t,e),n.noSync||"function"==typeof a.sync&&a.sync("update",t,e)):a.push(e)}),!0},i.prototype.clear=function(e){if(e=e||{},0===this.items.length)return 0;var t=this.toArray();return this.items=[],e.silent||this.emit("item.clear",t),e.noSync||"function"==typeof this.sync&&this.sync("clear",t),t.length},i.prototype.toArray=function(){return this.items.map(function(e){return e.properties})},i.prototype.findOne=function(e){var t;if(t=this.items)for(var i=0;t.length>i;i++){var n,r=t[i];for(var o in e)if(e.hasOwnProperty(o)){if(r.properties[o]&&r.properties[o]===e[o]){n=!0;break}n=!1}if(n===!0)return r}return null},i.prototype.find=function(e){var t,i=[];if(t=this.items)for(var n=0;t.length>n;n++){var r,o=t[n];for(var s in e)if(e.hasOwnProperty(s)){if(o.properties[s]&&o.properties[s]===e[s]){r=!0;break}r=!1}r===!0&&i.push(o)}return i},i.prototype.each=function(e,t){"function"==typeof e&&(t=e,e=null);for(var i=e,n=0,r=this.items.length;r>n;n++)i=t(i,this.items[n].properties);return i},e.List=i}(XQCore),function(e){"use strict";var t;t=function(t,i){this.noAutoRegister=!1,e.List.call(this,t,i),this.server=this.server||location.protocol+"//"+location.hostname,this.port=this.port||e.socketPort,this.path=this.path||"xqsocket/"+this.name.toLowerCase(),this.syncEnabled=!1,this.connectToSocket(),this.noAutoRegister||this.register()},t.prototype=Object.create(e.List.prototype),t.prototype.constructor=t,t.prototype.connectToSocket=function(){var t=this.server+":"+this.port+"/"+this.path;this.socket||(this.socket=new e.Socket,this.socket.connect(t))},t.prototype.register=function(e){var t=this;"boolean"==typeof e&&(this.syncEnabled=e),console.log("Register synclist listener"),t.dev("Register synclist at server:",t.name);var i={noSync:!0};t.socket.on("synclist.push",function(e){t.push(e,i)}),t.socket.on("synclist.unshift",function(e){t.push(e,i)}),t.socket.on("synclist.pop",function(){t.push(i)}),t.socket.on("synclist.shift",function(){t.push(i)}),t.socket.on("synclist.update",function(e,n){t.update(e,n,i)}),t.socket.on("synclist.init",function(e){console.log("Got initial data:",e),t.push(e,i)}),t.socket.emit("synclist.register",{name:t.name})},t.prototype.unregister=function(){this.dev("Unregister synclist at server:",this.name),this.socket.emit("synclist.unregister",{name:this.name}),this.socket.off("synclist.push"),this.socket.off("synclist.unshift"),this.socket.off("synclist.pop"),this.socket.off("synclist.shift"),this.socket.off("synclist.update")},t.prototype.emitRemote=function(e,t){this.socket.emit(e,t)},t.prototype.sync=function(){if(this.syncEnabled){var e=Array.prototype.slice.call(arguments);this.emitRemote("syncmodel.change",e)}},t.prototype.fetchList=function(){this.emitRemote("synclist.fetch")},e.SyncList=t}(XQCore);