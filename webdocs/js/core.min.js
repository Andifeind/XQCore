var CoreRouter=function(e){var t,n;return t=Backbone.Router.extend(e),n=new t,Backbone.history.start(),n},CorePresenter=function(){var e=function(e){$.extend(this,e,new CoreEvent,new CoreLogger),this.name=(e.name||"Nameless")+"Presenter",this.debug=Boolean(e.debug),this.eventCallbacks={},this.log("Initialize presenter with conf:",e),this.init()};return e.prototype.init=function(){},e}(),CoreModel=function(){var e;return e=function(e){e===undefined&&(e={}),$.extend(this,e,new CoreEvent,new CoreLogger),this.name=(e.name||"Nameless")+"Model",this.debug=Boolean(e.debug),this.attributes={},this._isValid=!1,e.validate&&(this.validate=function(t){var n;this._isValid=!1,n=e.validate.call(this,t);if(!n||typeof n=="object"&&Object.keys(n).length===0)this._isValid=!0;return n}.bind(this)),this.init()},e.prototype.init=function(){},e.prototype.validate=function(){},e.prototype.isValid=function(){return this._isValid},e.prototype.set=function(){var e={},t;typeof arguments[0]=="object"?($.extend(e,arguments[0]),this.log("Set data",arguments[0])):typeof arguments[0]=="string"?(e[arguments[0]]=arguments[1],this.log("Set data",arguments[0],arguments[1])):this.warn("Data are incorrect in model.set()",arguments);if(this.validate){t=this.validate(e);if(t)return this.warn("Validate error in model.set",t),t}$.extend(this.attributes,e)},e.prototype.get=function(e){return e===undefined?this.attributes:this.attributes[e]},e.prototype.has=function(e){return!!this.attributes[e]},e.prototype.reset=function(){this.log("Reset model"),this.attributes={}},e}(),CoreView=function(){var e=function(e,t){var n=this;$.extend(this,t,new CoreEvent,new CoreLogger),this.name=(t.name||"Nameless")+"View",this.presenter=e,this.debug=Boolean(t.debug),this.container=$(t.container),this.container.length>0?(window.addEventListener("resize",function(e){n.resize(e)},!1),this.log("Initialize view with conf:",t),this.log("  ... using Presenter:",this.presenter.name),this.log("  ... using Container:",this.container),Object.keys(this.events).forEach(function(e){var t=e.split(" ",2),n,r=t[0],i=t[1]||null;t.length===1||t.length===2?(n=this.presenter.events[this.events[e]],typeof n=="function"?(this.container.on(r,n),this.log("Register Event:",r,"on selector",i,"with callback",n)):this.warn("Event handler callback not defined in Presenter:",this.events[e])):this.warn("Incorect event configuration",e)},this),this.init()):this.error("Can't initialize View, Container not found!",this.container)};return e.prototype.init=function(){},e.prototype.show=function(){},e.prototype.hide=function(){},e.prototype.render=function(){},e.prototype.resize=function(){},e}(),CoreEvent=function(){function n(e,t){this.objectName="CoreEvent";var n=this.store.length,r=0,i;for(;r<n;r++){i=this.store[r];if(e===null||e===i.event&&t===null||t===i.callback)return i}return null}var e,t;return t=function(e){this.store=[]},e=new EventEmitter,t.prototype.emit=function(t,n){return this.debug&&console.debug("Akonda Core - Emit event",t,n),e.emitEvent(t,[n])},t.prototype.on=function(t,n){return this.debug&&console.debug("Akonda Core - Add listener",t,n),e.addListener(t,n)},t.prototype.once=function(t,n){var r=function(){return e.removeListener(t,n),n.call(null,arguments),!0};return this.debug&&console.debug("Akonda Core - Add once listener",t,n),e.addListener(t,r)},t.prototype.off=function(t,n){return this.debug&&console.debug("Akonda Core - Remove listener",t,n),n===undefined?e.removeEvent(t):e.removeListener(t,n)},t}(),CoreLogger=function(e){function t(e){return e<1e3?e+" ms":e<6e4?e/1e3+" sec":e/6e4+" min"}var n=function(){};return n.prototype.log=function(){var e;this.debug&&(e=Array.prototype.slice.call(arguments),e.unshift("["+this.name+"]"),console.log.apply(console,e))},n.prototype.warn=function(){var e;this.debug&&(e=Array.prototype.slice.call(arguments),e.unshift("["+this.name+"]"),console.warn.apply(console,e))},n.prototype.error=function(){var e;this.debug&&(e=Array.prototype.slice.call(arguments),e.unshift("["+this.name+"]"),console.error.apply(console,e))},n.prototype.timer=function(e){var t={start:null,stop:null,name:e,end:function(){return this}};return this.log("Start Timer",e),t.start=Date.now(),t},n.prototype.timerEnd=function(e){typeof e=="object"?(e.stop=Date.now(),this.log("Timer "+e.name+" runs: ",t(Date.now()-e.start))):this.warn("Not a timer object in logger.timerEnd()",e)},n}(),CoreUtil=function(e){var t={name:"CoreUtil",debug:!0};return t.serializeForm=function(t){var n={},r=e(t);return r.get(0).tagName!=="INPUT"&&(r=r.find(":input")),r.serializeArray().forEach(function(e){n[e.name]=e.value}),this.debug&&console.log("Akonda Core - Serialize form:",r,n),n},t.checkLength=function(e,t,n){if(typeof e=="Number"){if(e<t)return"num-to-small";if(e>n)return"num-to-large"}else{console.log(e,e.length);if(e.length<t)return"str-to-short";if(e.length>n)return"str-to-long"}},t.checkEqual=function(e,t){if(e!==t)return"str-not-equal"},t.checkEmail=function(e){if(!/^\S+\@\S+\.[a-z]{2,10}$/.test(e))return"invalid-email"},t}(jQuery);